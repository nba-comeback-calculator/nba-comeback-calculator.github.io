
<!DOCTYPE html>


<html lang="en" data-content_root="../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Plotting Game Data on a Normal Axis &#8212; nba comeback calculator  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/css/nbacc.css?v=b845c6e9" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/basicLightbox/5.0.0/basicLightbox.min.css" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-6Q6K588YXL"></script>
    <script>
                window.dataLayer = window.dataLayer || [];
                function gtag(){ dataLayer.push(arguments); }
                gtag('js', new Date());
                gtag('config', 'G-6Q6K588YXL');
            </script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'methodology/plotting_game_data_on_a_normal_axis';</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chartjs-plugin-zoom/2.2.0/chartjs-plugin-zoom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/basicLightbox/5.0.0/basicLightbox.min.js"></script>
    <script src="../_static/js/nbacc_utils.js?v=c3261937"></script>
    <script src="../_static/js/nbacc_saveas_image_dialog.js?v=e8366de8"></script>
    <script src="../_static/js/nbacc_plotter_plugins.js?v=d5efc5cd"></script>
    <script src="../_static/js/nbacc_plotter_data.js?v=18aa39b4"></script>
    <script src="../_static/js/nbacc_plotter_core.js?v=d64f3ed5"></script>
    <script src="../_static/js/nbacc_plotter_ui.js?v=5c1e6a37"></script>
    <script src="../_static/js/nbacc_chart_loader.js?v=edb8292c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Plots" href="../plots/index.html" />
    <link rel="prev" title="methodology" href="index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">nba comeback calculator</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../analysis/index.html">
    Analysis
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    methodology
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../plots/index.html">
    Plots
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
      
        <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
      
    </div>
    
  </div>
  
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../analysis/index.html">
    Analysis
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    methodology
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../plots/index.html">
    Plots
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">methodology</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Plotting Game Data on a Normal Axis</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="plotting-game-data-on-a-normal-axis">
<h1>Plotting Game Data on a Normal Axis<a class="headerlink" href="#plotting-game-data-on-a-normal-axis" title="Link to this heading">#</a></h1>
<p><a class="reference external" href="https://stattrek.com/regression/transformations-in-regression">transform</a></p>
<p><a class="reference external" href="https://online.stat.psu.edu/stat501/book/export/html/956">transform2</a></p>
<section id="normal-probability-plots">
<h2>Normal Probability Plots<a class="headerlink" href="#normal-probability-plots" title="Link to this heading">#</a></h2>
<p>As briefly as possible, when you collect statistical data, that data is often
normally distributed. This appears to be the case with the NBA data we’ve
collected. This is very helpful because it means that we can simply plot the
data on a <a class="reference external" href="https://en.wikipedia.org/wiki/Normal_probability_plot">normal probability plot</a> and the data will mostly
– except for outliers – fall on a straight line.</p>
<p>Then, a trend line through that data can be found using simple linear regression
(this is not as accurate as fitting the data using maximum likelihood estimation,
but it’s more than good enough for our purposes). Having this trend line allows
us to compare probabilities of events more easily and cuts out the noise of the
actual data. This of course only works if the trend line is actually a good fit
for the data, <a class="reference external" href="https://statisticsbyjim.com/regression/interpret-r-squared-regression/">and thankfully we can use the R² value to tell us this</a>. Most of
the trend line R values used in this analysis are 0.95 with many in the
large game data set about 0.98 or higher. Of course, the smaller the number of games,
the more outliers and the worse the fit, driving us to consider larger
periods of time to see the trends (always making recent trend analysis more difficult).</p>
<p>So to tell if you have normal data, you convert the cumulative probabilities of the
event happening from percentages to how many normal standard deviations they are
from the mean (using
<a class="reference external" href="https://medium.com/&#64;rathibala96/probability-distributions-a-comprehensive-guide-to-pmf-pdf-and-cdf-ppf-297fbb2f6803">a unit normal’s ppf function</a>
). Then you plot it and see if you can fit a straight line to it.</p>
<p>For the problem of “what is the chance of winning when down N points starting at X time”,
the data is very normal, from large negative point margins to very high ones.
Take this plot here showing the win probability of a team down 24 points at the
half on all the data I have from 1996. The data is very normal, and the trend line
is a very good fit:</p>
<div id="nbacc_point_final_24_mirror_eras_all" class="nbacc-chart"></div><p>Note, the mean is simply a tie at the half, and everything to the right is by
construction a mirror of everything to the left (the team that came back from 34 down
at the half beat the only team that gave up a 34 point lead at the half:
11/27/1996 DEN &#64; UTA: 103-107).</p>
<p>Here, the actual y values are the number of standard deviations (or sigmas) from the
mean, both positive and negative. I’ve simply changed the y-axis labels to be the
standard probabilities that we are used to talking about.</p>
<p>If I didn’t change the axis, the plot would look like this: where -1 is one
standard deviation to the left of the mean (or about a 16% chance of winning) and
-2 is two standard deviations to the left of the mean (or about a 2% chance of
winning), etc.</p>
<div id="nbacc_point_final_24_mirror_normal_labels_eras_all" class="nbacc-chart"></div><p>The data forms almost a perfectly straight line, making fitting
a good trend line possible. In fact, to check the R² value, you can simply
press the ‘R’ key when hovering over a trend line data point and it will show you
the value. For this case, R² is 0.98, meaning a very good fit.</p>
<p>Note, on all regression fits, I throw out all points with only 1 or 2 wins of
data to reduce the ‘overfitting’ of outliers. Again, this could have been
mitigated by using maximum likelihood estimation, something I may look into
later (some technical details about that as well). Overall, I’m happy with the
trend lines and think they are a very good representation of the data.</p>
</section>
<section id="down-max-or-more-points">
<h2>Down Max or More Points<a class="headerlink" href="#down-max-or-more-points" title="Link to this heading">#</a></h2>
<div id="nbacc_max_or_more_48_full_eras_all" class="nbacc-chart"></div><div id="nbacc_max_or_more_48_full_normal_labels_eras_all" class="nbacc-chart"></div></section>
<section id="down-max-points">
<h2>Down Max Points<a class="headerlink" href="#down-max-points" title="Link to this heading">#</a></h2>
<div id="nbacc_max_48_full_eras_all" class="nbacc-chart"></div><div id="nbacc_max_48_full_normal_labels_eras_all" class="nbacc-chart"></div></section>
<section id="is-this-data-normally-distributed">
<h2>Is This Data Normally Distributed?<a class="headerlink" href="#is-this-data-normally-distributed" title="Link to this heading">#</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Imports ...</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pylab</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">norm</span>

<span class="c1"># First, find all the point margins at halftime. Here the point margin</span>
<span class="c1"># is defined by point_margin = home_score - away_score.</span>
<span class="n">point_margins</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">game</span> <span class="ow">in</span> <span class="n">games</span><span class="p">:</span>
    <span class="n">point_margins</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">game</span><span class="o">.</span><span class="n">score_stats_by_minute</span><span class="o">.</span><span class="n">point_margins</span><span class="p">[</span><span class="mi">24</span><span class="p">])</span>
<span class="c1"># Sort the point margins and find the empirical CDF</span>
<span class="n">point_margins</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">point_margins</span><span class="p">)</span>
<span class="n">emp_cdf</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span> <span class="o">+</span> <span class="mf">0.5</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">point_margins</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">point_margins</span><span class="p">))]</span>
<span class="n">normal_emp_cdf</span> <span class="o">=</span> <span class="p">[</span><span class="n">unorm</span><span class="o">.</span><span class="n">ppf</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">emp_cdf</span><span class="p">]</span>
<span class="c1"># Fit data using a MLE estimator</span>
<span class="p">(</span><span class="n">mean</span><span class="p">,</span> <span class="n">sigma</span><span class="p">)</span> <span class="o">=</span> <span class="n">norm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">point_margins</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">point_margins</span><span class="p">,</span> <span class="n">cdf</span><span class="p">,</span> <span class="s2">&quot;ro&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">cdf_fit</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">point_margins</span><span class="p">)</span> <span class="o">-</span> <span class="n">mean</span><span class="p">)</span> <span class="o">/</span> <span class="n">sigma</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">point_margins</span><span class="p">,</span> <span class="n">cdf_fit</span><span class="p">,</span> <span class="s2">&quot;b-&quot;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">legend</span><span class="p">([</span><span class="s2">&quot;Empirical CDF&quot;</span><span class="p">,</span> <span class="s2">&quot;MLE Normal Fit&quot;</span><span class="p">])</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Point Differential (Home - Away)&quot;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Standard Deviations From Mean (</span><span class="se">\u03c3</span><span class="s2">)&quot;</span><span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">title</span><span class="p">(</span>
    <span class="sa">f</span><span class="s2">&quot;Point Differential (Home - Away) At Halftime &quot;</span>
    <span class="sa">f</span><span class="s2">&quot;(</span><span class="se">\u03bc</span><span class="s2">=</span><span class="si">{</span><span class="n">mean</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, </span><span class="se">\u03c3</span><span class="s2">=</span><span class="si">{</span><span class="n">sigma</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">) for 1996-2024 Season &quot;</span>
    <span class="sa">f</span><span class="s2">&quot;(</span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">games</span><span class="p">)</span><span class="si">}</span><span class="s2"> Data Points)&quot;</span>
<span class="p">)</span>
<span class="n">pylab</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/half_scores.png"><img alt="../_images/half_scores.png" class="align-center" src="../_images/half_scores.png" style="width: 717.4200000000001px; height: 440.22px;" />
</a>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#normal-probability-plots">Normal Probability Plots</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#down-max-or-more-points">Down Max or More Points</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#down-max-points">Down Max Points</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#is-this-data-normally-distributed">Is This Data Normally Distributed?</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, Andrew Carter.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>